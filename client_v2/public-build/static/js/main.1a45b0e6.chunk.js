(this.webpackJsonpclient_v2=this.webpackJsonpclient_v2||[]).push([[0],{138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),l=a.n(o),s=(a(80),a(6)),c=a(4),i=a(9),m=a(7),u=a(8),d=(a(25),a(21),a(5)),f=a.n(d),h=a(16),p=a(2),b=a(45),v=a.n(b),E=(a(82),a(31)),g=a.n(E),y=a(22);function k(e){return{type:"RESET_DATA",payload:e}}var j=a(17),N=a.n(j),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).makeChange=function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),"None"===t.target.value){e.next=8;break}return e.next=4,N.a.post("/distinct",{field:"model",match:{marka:t.target.value}});case 4:n=e.sent,a.setState({selectedMake:t.target.value,models:n.data}),e.next=9;break;case 8:a.setState({selectedMake:"",models:[],selectedModel:""});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.modelChange=function(e){e.persist(),a.setState({selectedModel:e.target.value})},a.fromKm=function(e){e.persist(),"None"===e.target.value?a.setState({fromKm:""}):a.setState({fromKm:e.target.value})},a.toKm=function(e){e.persist(),"None"===e.target.value?a.setState({toKm:""}):a.setState({toKm:e.target.value})},a.fromPower=function(e){e.persist(),a.setState({fromPower:e.target.value})},a.toPower=function(e){e.persist(),a.setState({toPower:e.target.value})},a.fromPrice=function(e){e.persist(),a.setState({fromPrice:e.target.value})},a.toPrice=function(e){e.persist(),a.setState({toPrice:e.target.value})},a.typeChange=function(e){e.persist(),"None"===e.target.value?a.setState({selectedType:""}):a.setState({selectedType:e.target.value})},a.regionChange=function(e){e.persist(),"None"===e.target.value?a.setState({selectedRegion:""}):a.setState({selectedRegion:e.target.value})},a.getSearchBodyGLTE=function(e,t){var n={$gte:""===a.state[e]?void 0:parseInt(a.state[e]),$lte:""===a.state[t]?void 0:parseInt(a.state[t])};return""===a.state[e]&&""===a.state[e]&&(n=void 0),n},a.buttonClicked=Object(h.a)(f.a.mark((function e(){var t,n,r,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getSearchBodyGLTE("fromKm","toKm"),n=a.getSearchBodyGLTE("fromPower","toPower"),r=a.getSearchBodyGLTE("fromPrice","toPrice"),o={marka:a.state.selectedMake,model:""===a.state.selectedModel?void 0:a.state.selectedModel,kilometraza:t,snaga:n,cena:r,karoserija:""===a.state.selectedType?void 0:a.state.selectedType,mesto:""===a.state.selectedRegion?void 0:a.state.selectedRegion},console.log(o),console.log(a.props.dates),e.next=8,N.a.post("/queryFromDateToDate",{searchBody:o,dates:a.props.dates});case 8:if(l=e.sent,console.log(l.data),0!==l.data.length){e.next=12;break}return e.abrupt("return");case 12:a.props.addData({data:l.data,numberOf:l.data.map((function(e){return e.places.length})),stylePlot:{display:"block"},showMap:!0,x:l.data.map((function(e){return e._id})),y:l.data.map((function(e){return e.avg_price})),name:l.data[0].places[0].marka+" "+l.data[0].places[0].model,searchBody:o});case 13:case"end":return e.stop()}}),e)}))),a.state={type:[],selectedType:"",region:[],selectedRegion:"",makes:[],selectedMake:"",models:[],selectedModel:"",data:[],showPlot:!1,stylePlot:{display:"none"},showMap:!1,x:-1,y:-1,fromKm:"",toKm:"",fromPower:"",toPower:"",fromPrice:"",toPrice:"",date:a.props.dates,key:a.props.index},a.makeChange=a.makeChange.bind(Object(p.a)(a)),a.modelChange=a.modelChange.bind(Object(p.a)(a)),a.fromKm=a.fromKm.bind(Object(p.a)(a)),a.toKm=a.toKm.bind(Object(p.a)(a)),a.typeChange=a.typeChange.bind(Object(p.a)(a)),a.regionChange=a.regionChange.bind(Object(p.a)(a)),a.buttonClicked=a.buttonClicked.bind(Object(p.a)(a)),a.fromPrice=a.fromPrice.bind(Object(p.a)(a)),a.toPrice=a.toPrice.bind(Object(p.a)(a)),a.fromPower=a.fromPower.bind(Object(p.a)(a)),a.toPower=a.toPower.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/distinct",{field:"marka"});case 2:return t=e.sent,e.next=5,N.a.post("/distinct",{field:"karoserija"});case 5:return a=e.sent,e.next=8,N.a.post("/distinct",{field:"region"});case 8:n=e.sent,console.log(t),console.log(a),console.log(n),this.setState({makes:t.data,type:a.data,region:n.data}),(0,this.props.formRef)(this);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){(0,this.props.formRef)(void 0)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form-inline d-flex justify-content-around"},r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"make",className:"form-field"},"Marka:"),r.a.createElement("select",{onChange:this.makeChange,className:"form-control form-field",id:"make"+this.state.key},r.a.createElement("option",null,"None"),this.state.makes.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{htmlFor:"model",className:"form-field"},"Model:"),r.a.createElement("select",{onChange:this.modelChange,className:"form-control form-field",id:"model"+this.state.key},r.a.createElement("option",null,"None"),this.state.models.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"priceFrom",className:"form-field"},"Cena od (\u200e\u20ac):"),r.a.createElement("input",{type:"number",onChange:this.fromPrice,className:"form-control form-field",id:"priceFrom"+ +this.state.key})),r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"priceTo",className:"form-field"},"Cena do (\u200e\u20ac):"),r.a.createElement("input",{type:"number",onChange:this.toPrice,className:"form-control form-field",id:"priceTo"+this.state.key}))),r.a.createElement("div",{className:"d-flex flex-column "},r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"powerFrom",className:"form-field"},"Snaga od (KS):"),r.a.createElement("input",{type:"number",onChange:this.fromPower,className:"form-control form-field",id:"powerFrom"+ +this.state.key})),r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"powerTo",className:"form-field"},"Snaga do (KS):"),r.a.createElement("input",{type:"number",onChange:this.toPower,className:"form-control form-field",id:"powerTo"+this.state.key}))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"region",className:"form-field"},"Region:"),r.a.createElement("select",{onChange:this.regionChange,className:"form-control form-field",id:"region"+this.state.key},r.a.createElement("option",null,"None"),this.state.region.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"type",className:"form-field"},"Karoserija:"),r.a.createElement("select",{onChange:this.typeChange,className:"form-control form-field",id:"type"+this.state.key},r.a.createElement("option",null,"None"),this.state.type.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"kmFrom",className:""},"Kilometra\u017ea od (km):"),r.a.createElement("select",{onChange:this.fromKm,className:"form-control",id:"kmFrom"+this.state.key},r.a.createElement("option",null,"None"),r.a.createElement("option",null,"0"),r.a.createElement("option",null,"100000"),r.a.createElement("option",null,"150000"),r.a.createElement("option",null,"200000"))),r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"kmTo",className:""},"Kilometra\u017ea do (km):"),r.a.createElement("select",{onChange:this.toKm,className:"form-control",id:"kmTo"+this.state.key},r.a.createElement("option",null,"None"),r.a.createElement("option",null,"200000"),r.a.createElement("option",null,"150000"),r.a.createElement("option",null,"100000"),r.a.createElement("option",null,"0"))))))}}]),t}(n.Component);var x=Object(y.b)(null,(function(e){return{setData:function(t){return e({type:"SET_DATA",payload:t})},addData:function(t){return e({type:"ADD_DATA",payload:t})},resetData:function(t){return e(k(t))}}}))(O),w=a(37),C=a.n(w),S=a(48),T=a.n(S),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).buttonSearch=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.state.dateFrom),console.log(a.state.dateTo),""!==a.state.dateTo&&""!==a.state.dateFrom){e.next=5;break}return alert("Morate uneti datum!"),e.abrupt("return");case 5:return e.next=7,a.props.resetData({});case 7:return e.next=9,a.form.buttonClicked();case 9:if(!a.state.showSecond){e.next=12;break}return e.next=12,a.form2.buttonClicked();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.buttonAdd=function(){a.rotate(),a.setState({showSecond:!a.state.showSecond,rotate:!0,idTimer:setInterval((function(){return a.rotate()}),.01)})},a.dateChangeFrom=function(e){null===e?a.setState({dateFrom:""}):a.setState({dateFrom:e})},a.dateChangeTo=function(e){null===e?a.setState({dateTo:""}):a.setState({dateTo:e})},a.state={data:[],showPlot:!1,stylePlot:{display:"none"},showMap:!1,x:-1,y:-1,dateFrom:"",dateTo:"",showSecond:!1,rotation:0,idTimer:null},a.buttonSearch=a.buttonSearch.bind(Object(p.a)(a)),a.dateChangeFrom=a.dateChangeFrom.bind(Object(p.a)(a)),a.dateChangeTo=a.dateChangeTo.bind(Object(p.a)(a)),a.stopRotate=a.stopRotate.bind(Object(p.a)(a)),a.rotate=a.rotate.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"stopRotate",value:function(){clearInterval(this.state.idTimer)}},{key:"rotate",value:function(){var e=this.state.rotation+1;e>=360&&(e=-360),this.setState({rotation:e}),console.log(this.state.rotation),this.state.rotation%45===0&&this.stopRotate()}},{key:"render",value:function(){var e=this,t={display:"none"};this.state.showSecond&&(t={});var a=this.state.showSecond?"Skloni vozilo ":"Dodaj vozilo ",n=this.state.rotation;return r.a.createElement("div",{className:"searchBar text-white bg-primary"},r.a.createElement("form",{className:"searchBarForm "},r.a.createElement(v.a,{minDeviceWidth:1224},r.a.createElement("div",{className:"form-inline d-flex d-flex justify-content-center"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",null,"Datumi oglasa od:"),r.a.createElement("div",{className:"date-picker"},r.a.createElement(g.a,{onChange:this.dateChangeFrom,value:this.state.dateFrom}))),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",null,"Datumi oglasa do:"),r.a.createElement("div",{className:"date-picker"},r.a.createElement(g.a,{onChange:this.dateChangeTo,value:this.state.dateTo})))),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"forms"},r.a.createElement(x,{index:1,formRef:function(t){return e.form=t},dates:[this.state.dateFrom,this.state.dateTo]}),r.a.createElement("br",null),r.a.createElement("div",{style:t},r.a.createElement(x,{index:2,formRef:function(t){return e.form2=t},dates:[this.state.dateFrom,this.state.dateTo]}),r.a.createElement("br",null))),r.a.createElement("div",{className:" buttons"},r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex justify-content-end form-group "},r.a.createElement("button",{type:"button",onClick:this.buttonAdd,className:"btn btn-primary mb-2 button"},a," ",r.a.createElement("img",{style:{transform:"rotate(".concat(n,"deg)")},src:T.a,className:"plus-logo",alt:"logo"}))),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("button",{type:"button",onClick:this.buttonSearch,className:"btn btn-warning text-white ButtonSearch"},"Pretra\u017ei ",r.a.createElement("img",{src:C.a,className:"search-logo",alt:"logo"})))))),r.a.createElement(v.a,{maxDeviceWidth:1224},r.a.createElement("div",{className:"form-inline d-flex d-flex justify-content-around"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",null,"Datumi oglasa od:"),r.a.createElement("div",{className:"date-picker"},r.a.createElement(g.a,{onChange:this.dateChangeFrom,value:this.state.dateFrom}))),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",null,"Datumi oglasa do:"),r.a.createElement("div",{className:"date-picker"},r.a.createElement(g.a,{onChange:this.dateChangeTo,value:this.state.dateTo})))),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"forms-mobile d-flex"},r.a.createElement("div",{className:"form-mobile"},r.a.createElement(x,{index:1,formRef:function(t){return e.form=t},dates:[this.state.dateFrom,this.state.dateTo]})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-mobile",style:t},r.a.createElement(x,{index:2,formRef:function(t){return e.form2=t},dates:[this.state.dateFrom,this.state.dateTo]}),r.a.createElement("br",null))),r.a.createElement("div",{className:"form-inline buttons-mobile d-flex justify-content-center"},r.a.createElement("br",null),r.a.createElement("div",{className:" "},r.a.createElement("button",{type:"button",onClick:this.buttonAdd,className:"btn btn-primary mb-2 button"},a," ",r.a.createElement("img",{style:{transform:"rotate(".concat(n,"deg)")},src:T.a,className:"plus-logo",alt:"logo"}))),r.a.createElement("div",{className:""},r.a.createElement("button",{type:"button",onClick:this.buttonSearch,className:"btn btn-warning text-white ButtonSearch"},"Pretra\u017ei ",r.a.createElement("img",{src:C.a,className:"search-logo",alt:"logo"})))))))))}}]),t}(n.Component);var F=Object(y.b)(null,(function(e){return{resetData:function(t){return e(k(t))}}}))(P),D=a(39),K=a(30),A=a.n(K),M=a(140),R=a(141),B=a(139),_=a(72),z=a(40),L=a(19),W=a(12),G=a.n(W);a(70);var I=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createLeafletElement",value:function(e){var t=new G.a.markerClusterGroup(e);return this.contextValue=Object(_.a)({},e.leaflet,{layerContainer:t}),t}}]),t}(z.a),$=Object(L.b)(I);a(70),a(136);var J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={data:e.data,places:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.data.length&&this.searchForLatLng().then()}},{key:"searchForLatLng",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/places",this.state.data.searchBody);case 2:t=e.sent,a=t.data,console.log(a),this.setState({places:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"Mapa za ",this.state.data.name),r.a.createElement(M.a,{center:[44.5,19.5],zoom:6,maxZoom:18},r.a.createElement(R.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),"react",r.a.createElement($,null,this.state.places.map((function(e,t){return void 0===e?{}:r.a.createElement(B.a,{key:t,position:[e.lat,e.lng]})})))),r.a.createElement("br",null))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={normal:[],search:e.search},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/normal",this.state.search);case 2:t=e.sent,console.log(t),this.setState({normal:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A.a,{style:{width:"100%"},data:[{type:"histogram",x:this.state.normal.data}],layout:{title:"Histogram normalne raspodele za "+this.state.search.marka+" "+this.state.search.model}}))}}]),t}(n.Component),q=a(73),H=a.n(q),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={data:[],show:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.data.length){e.next=2;break}return e.abrupt("return");case 2:this.setState({data:Object(D.a)(t.data[0].data),stylePlot:t.data[0].style,x:t.data[0].x,y:t.data[0].y,show:!0,name:t.data[0].name});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showPlots",value:function(){return r.a.createElement("div",{className:"plots",style:this.state.stylePlot},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(A.a,{style:{width:"100%"},data:this.props.data.map((function(e,t){return{type:"line",x:e.x,y:e.y,name:e.name}})),layout:{title:"Prosecna cena po danima"}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(A.a,{style:{width:"100%"},data:this.props.data.map((function(e,t){return{type:"bar",x:e.x,y:e.numberOf,name:e.name}})),layout:{title:"Prosecan broj vozila po danima"}})),r.a.createElement("br",null),this.props.data.map((function(e,t){return r.a.createElement("div",{key:t,className:"justify-content-center"},r.a.createElement(U,{search:e.searchBody}))})),r.a.createElement("br",null),this.props.data.map((function(e,t){return r.a.createElement("div",{key:t,className:" justify-content-center"},r.a.createElement(J,{data:e}))})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container Plots"},this.state.show?this.showPlots():r.a.createElement("img",{src:H.a,className:"car-logo img-fluid d-block mx-auto",alt:"logo"}))}}]),t}(n.Component),Z=Object(y.b)((function(e){return{data:e.data}}),{})(V),Q=(a(137),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand font-weight-bold"},"AutoAnaliza.com"))),r.a.createElement("br",null))}}]),t}(n.Component)),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"jumbotron jumbotron-fluid text-white bg-primary footer"},r.a.createElement("div",{className:" text-center "},"Kontakt: ",r.a.createElement("br",null),"info@autoanaliza.com",r.a.createElement("br",null),"+381 62 107 76 67"))}}]),t}(n.Component),Y=a(36),ee={data:[]};var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;return"SET_DATA"===t.type?Object.assign({},e,{data:[t.payload]}):"ADD_DATA"===t.type?Object.assign({},e,{data:[].concat(Object(D.a)(e.data),[t.payload])}):"RESET_DATA"===t.type?Object.assign({},e,{data:[]}):e},ae=Object(Y.b)(te),ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{store:ae},r.a.createElement(Q,null),r.a.createElement("div",{className:"container App"},r.a.createElement(F,null),r.a.createElement("br",null),r.a.createElement(Z,null)),r.a.createElement(X,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},21:function(e,t,a){},25:function(e,t,a){},37:function(e,t,a){e.exports=a.p+"static/media/search.a384c609.svg"},48:function(e,t,a){e.exports=a.p+"static/media/plus.4adc8b78.svg"},73:function(e,t,a){e.exports=a.p+"static/media/car.b6a3a2f0.svg"},75:function(e,t,a){e.exports=a(138)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.1a45b0e6.chunk.js.map