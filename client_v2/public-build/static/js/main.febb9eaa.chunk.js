(this.webpackJsonpclient_v2=this.webpackJsonpclient_v2||[]).push([[0],{131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),c=a.n(o),s=(a(71),a(6)),l=a(4),i=a(9),m=a(7),u=a(8),d=(a(23),a(21),a(5)),p=a.n(d),h=a(16),f=a(2),b=a(62),v=a.n(b),y=a(22);function E(e){return{type:"RESET_DATA",payload:e}}var g=a(17),j=a.n(g),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).makeChange=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),"None"===t.target.value){e.next=8;break}return e.next=4,j.a.post("/distinct",{field:"model",match:{marka:t.target.value}});case 4:n=e.sent,a.setState({selectedMake:t.target.value,models:n.data}),e.next=9;break;case 8:a.setState({selectedMake:"",models:[],selectedModel:""});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.modelChange=function(e){e.persist(),a.setState({selectedModel:e.target.value})},a.fromKm=function(e){e.persist(),"None"===e.target.value?a.setState({fromKm:""}):a.setState({fromKm:e.target.value})},a.toKm=function(e){e.persist(),"None"===e.target.value?a.setState({toKm:""}):a.setState({toKm:e.target.value})},a.fromPower=function(e){e.persist(),a.setState({fromPower:e.target.value})},a.toPower=function(e){e.persist(),a.setState({toPower:e.target.value})},a.fromPrice=function(e){e.persist(),a.setState({fromPrice:e.target.value})},a.toPrice=function(e){e.persist(),a.setState({toPrice:e.target.value})},a.typeChange=function(e){e.persist(),"None"===e.target.value?a.setState({selectedType:""}):a.setState({selectedType:e.target.value})},a.regionChange=function(e){e.persist(),"None"===e.target.value?a.setState({selectedRegion:""}):a.setState({selectedRegion:e.target.value})},a.getSearchBodyGLTE=function(e,t){var n={$gte:""===a.state[e]?void 0:parseInt(a.state[e]),$lte:""===a.state[t]?void 0:parseInt(a.state[t])};return""===a.state[e]&&""===a.state[e]&&(n=void 0),n},a.buttonClicked=Object(h.a)(p.a.mark((function e(){var t,n,r,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getSearchBodyGLTE("fromKm","toKm"),n=a.getSearchBodyGLTE("fromPower","toPower"),r=a.getSearchBodyGLTE("fromPrice","toPrice"),o={marka:a.state.selectedMake,model:""===a.state.selectedModel?void 0:a.state.selectedModel,kilometraza:t,snaga:n,cena:r,karoserija:""===a.state.selectedType?void 0:a.state.selectedType,mesto:""===a.state.selectedRegion?void 0:a.state.selectedRegion},console.log(o),e.next=7,j.a.post("/queryFromDateToDate",{searchBody:o,dates:a.props.dates});case 7:if(c=e.sent,console.log(c.data),0!==c.data.length){e.next=11;break}return e.abrupt("return");case 11:a.props.addData({data:c.data,numberOf:c.data.map((function(e){return e.places.length})),stylePlot:{display:"block"},showMap:!0,x:c.data.map((function(e){return e._id})),y:c.data.map((function(e){return e.avg_price})),name:c.data[0].places[0].marka+" "+c.data[0].places[0].model,searchBody:o});case 12:case"end":return e.stop()}}),e)}))),a.state={type:[],selectedType:"",region:[],selectedRegion:"",makes:[],selectedMake:"",models:[],selectedModel:"",data:[],showPlot:!1,stylePlot:{display:"none"},showMap:!1,x:-1,y:-1,fromKm:"",toKm:"",fromPower:"",toPower:"",fromPrice:"",toPrice:"",date:a.props.dates,key:a.props.index},a.makeChange=a.makeChange.bind(Object(f.a)(a)),a.modelChange=a.modelChange.bind(Object(f.a)(a)),a.fromKm=a.fromKm.bind(Object(f.a)(a)),a.toKm=a.toKm.bind(Object(f.a)(a)),a.typeChange=a.typeChange.bind(Object(f.a)(a)),a.regionChange=a.regionChange.bind(Object(f.a)(a)),a.buttonClicked=a.buttonClicked.bind(Object(f.a)(a)),a.fromPrice=a.fromPrice.bind(Object(f.a)(a)),a.toPrice=a.toPrice.bind(Object(f.a)(a)),a.fromPower=a.fromPower.bind(Object(f.a)(a)),a.toPower=a.toPower.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/distinct",{field:"marka"});case 2:return t=e.sent,e.next=5,j.a.post("/distinct",{field:"karoserija"});case 5:return a=e.sent,e.next=8,j.a.post("/distinct",{field:"region"});case 8:n=e.sent,console.log(t),console.log(a),console.log(n),this.setState({makes:t.data,type:a.data,region:n.data}),(0,this.props.formRef)(this);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){(0,this.props.formRef)(void 0)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form d-inline-flex"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"make",className:"col-8"},"Marka:"),r.a.createElement("select",{onChange:this.makeChange,className:"form-control col-8",id:"make"+this.state.key},r.a.createElement("option",null,"None"),this.state.makes.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"model",className:"col-8"},"Model:"),r.a.createElement("select",{onChange:this.modelChange,className:"form-control col-8",id:"model"+this.state.key},r.a.createElement("option",null,"None"),this.state.models.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"vbox "},r.a.createElement("label",{htmlFor:"priceFrom",className:"col-9"},"Cena od (\u200e\u20ac):"),r.a.createElement("input",{type:"number",onChange:this.fromPrice,className:"form-control col-7",id:"priceFrom"+ +this.state.key})),r.a.createElement("div",{className:"vbox "},r.a.createElement("label",{htmlFor:"priceTo",className:"col-9"},"Cena do (\u200e\u20ac):"),r.a.createElement("input",{type:"number",onChange:this.toPrice,className:"form-control col-7",id:"priceTo"+this.state.key}))),r.a.createElement("div",{className:"form-group "},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"powerFrom",className:"col-10"},"Snaga od (KS):"),r.a.createElement("input",{type:"number",onChange:this.fromPower,className:"form-control col-8",id:"powerFrom"+ +this.state.key})),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"powerTo",className:"col-10"},"Snaga do (KS):"),r.a.createElement("input",{type:"number",onChange:this.toPower,className:"form-control col-8",id:"powerTo"+this.state.key}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"region",className:"col-8"},"Region:"),r.a.createElement("select",{onChange:this.regionChange,className:"form-control col-8",id:"region"+this.state.key},r.a.createElement("option",null,"None"),this.state.region.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"type",className:"col-8"},"Karoserija:"),r.a.createElement("select",{onChange:this.typeChange,className:"form-control col-8",id:"type"+this.state.key},r.a.createElement("option",null,"None"),this.state.type.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"kmFrom",className:"col-16"},"Kilometraza od (km):"),r.a.createElement("select",{onChange:this.fromKm,className:"form-control",id:"kmFrom"+this.state.key},r.a.createElement("option",null,"None"),r.a.createElement("option",null,"0"),r.a.createElement("option",null,"100000"),r.a.createElement("option",null,"150000"),r.a.createElement("option",null,"200000"))),r.a.createElement("div",{className:"vbox"},r.a.createElement("label",{htmlFor:"kmTo",className:"col-15"},"Kilometraza do (km):"),r.a.createElement("select",{onChange:this.toKm,className:"form-control",id:"kmTo"+this.state.key},r.a.createElement("option",null,"None"),r.a.createElement("option",null,"200000"),r.a.createElement("option",null,"150000"),r.a.createElement("option",null,"100000"),r.a.createElement("option",null,"0"))))))}}]),t}(n.Component);var O=Object(y.b)(null,(function(e){return{setData:function(t){return e({type:"SET_DATA",payload:t})},addData:function(t){return e({type:"ADD_DATA",payload:t})},resetData:function(t){return e(E(t))}}}))(k),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).buttonSearch=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.state.date),e.next=3,a.props.resetData({});case 3:return e.next=5,a.form.buttonClicked();case 5:if(!a.state.showSecond){e.next=8;break}return e.next=8,a.form2.buttonClicked();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.buttonAdd=function(){a.setState({showSecond:!a.state.showSecond})},a.dateChange=function(e){null===e?a.setState({date:""}):a.setState({date:e})},a.state={data:[],showPlot:!1,stylePlot:{display:"none"},showMap:!1,x:-1,y:-1,date:"",showSecond:!1},a.buttonSearch=a.buttonSearch.bind(Object(f.a)(a)),a.dateChange=a.dateChange.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t={display:"none"};this.state.showSecond&&(t={});var a=this.state.showSecond?"Skloni vozilo (-)":"Dodaj vozilo (+)";return r.a.createElement("div",{className:"searchBar text-white bg-primary"},r.a.createElement("form",{className:"searchBarForm "},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"vbox"},r.a.createElement("label",null,"Datumi oglasa:"),r.a.createElement("div",null,r.a.createElement(v.a,{className:"bg-light input-group-text",onChange:this.dateChange,value:this.state.date})))),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"forms"},r.a.createElement(O,{index:1,formRef:function(t){return e.form=t},dates:this.state.date}),r.a.createElement("br",null),r.a.createElement("div",{style:t},r.a.createElement(O,{index:2,formRef:function(t){return e.form2=t},dates:this.state.date}),r.a.createElement("br",null))),r.a.createElement("div",{className:" buttons"},r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("button",{type:"button",onClick:this.buttonAdd,className:"btn btn-primary mb-2"},a)),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("button",{type:"button",onClick:this.buttonSearch,className:"btn btn-warning mb-2"},"Pretrazi"))))))}}]),t}(n.Component);var w=Object(y.b)(null,(function(e){return{resetData:function(t){return e(E(t))}}}))(N),x=a(36),C=a(30),S=a.n(C),P=a(133),T=a(134),D=a(132),K=a(64),F=a(37),A=a(19),M=a(12),z=a.n(M);a(61);var R=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"createLeafletElement",value:function(e){var t=new z.a.markerClusterGroup(e);return this.contextValue=Object(K.a)({},e.leaflet,{layerContainer:t}),t}}]),t}(F.a),B=Object(A.b)(R);a(61),a(129);var _=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={data:e.data,places:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.data.length&&this.searchForLatLng().then()}},{key:"searchForLatLng",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/places",this.state.data.searchBody);case 2:t=e.sent,a=t.data,console.log(a),this.setState({places:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"Mapa za ",this.state.data.name),r.a.createElement(P.a,{center:[44.5,19.5],zoom:6,maxZoom:18},r.a.createElement(T.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),"react",r.a.createElement(B,null,this.state.places.map((function(e,t){return void 0===e?{}:r.a.createElement(D.a,{key:t,position:[e.lat,e.lng]})})))),r.a.createElement("br",null))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={normal:[],search:e.search},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/normal",this.state.search);case 2:t=e.sent,console.log(t),this.setState({normal:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S.a,{style:{width:"100%"},data:[{type:"histogram",x:this.state.normal.data}],layout:{title:"Histogram normalne raspodele za "+this.state.search.marka+" "+this.state.search.model}}))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={data:[],show:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.data.length){e.next=2;break}return e.abrupt("return");case 2:this.setState({data:Object(x.a)(t.data[0].data),stylePlot:t.data[0].style,x:t.data[0].x,y:t.data[0].y,show:!0,name:t.data[0].name});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showPlots",value:function(){return r.a.createElement("div",{className:"plots",style:this.state.stylePlot},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(S.a,{style:{width:"100%"},data:this.props.data.map((function(e,t){return{type:"line",x:e.x,y:e.y,name:e.name}})),layout:{title:"Prosecna cena po danima"}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(S.a,{style:{width:"100%"},data:this.props.data.map((function(e,t){return{type:"bar",x:e.x,y:e.numberOf,name:e.name}})),layout:{title:"Prosecan broj vozila po danima"}})),r.a.createElement("br",null),this.props.data.map((function(e,t){return r.a.createElement("div",{key:t,className:"justify-content-center"},r.a.createElement(L,{search:e.searchBody}))})),r.a.createElement("br",null),this.props.data.map((function(e,t){return r.a.createElement("div",{key:t,className:" justify-content-center"},r.a.createElement(_,{data:e}))})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container Plots"},this.state.show?this.showPlots():"")}}]),t}(n.Component),W=Object(y.b)((function(e){return{data:e.data}}),{})(G),I=(a(130),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand font-weight-bold"},"AutoAnaliza.com"))),r.a.createElement("br",null))}}]),t}(n.Component)),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"jumbotron jumbotron-fluid text-white bg-primary footer"},r.a.createElement("div",{className:" text-center "},"Kontakt: info@autoanaliza.com"))}}]),t}(n.Component),J=a(34),U={data:[]};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return"SET_DATA"===t.type?Object.assign({},e,{data:[t.payload]}):"ADD_DATA"===t.type?Object.assign({},e,{data:[].concat(Object(x.a)(e.data),[t.payload])}):"RESET_DATA"===t.type?Object.assign({},e,{data:[]}):e},H=Object(J.b)(q),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{store:H},r.a.createElement(I,null),r.a.createElement("div",{className:"container App"},r.a.createElement(w,null),r.a.createElement("br",null),r.a.createElement(W,null)),r.a.createElement($,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},21:function(e,t,a){},23:function(e,t,a){},66:function(e,t,a){e.exports=a(131)},71:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.febb9eaa.chunk.js.map